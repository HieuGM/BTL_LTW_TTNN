<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduCenter ERP - Full Modules</title>
  <style>
    /* --- CSS C∆† B·∫¢N --- */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { display: flex; height: 100vh; background-color: #f3f4f6; color: #333; }
    
    /* Layout */
    .sidebar { width: 260px; background-color: #1e293b; color: white; display: flex; flex-direction: column; }
    .sidebar-header { padding: 20px; font-size: 1.2rem; font-weight: bold; border-bottom: 1px solid #334155; }
    .sidebar-menu { flex: 1; padding: 15px 0; list-style: none; overflow-y: auto; }
    .menu-item { padding: 12px 20px; cursor: pointer; color: #cbd5e1; transition: 0.2s; font-size: 0.95rem; }
    .menu-item:hover { background-color: #334155; color: white; }
    .menu-item.active { background-color: #2563eb; color: white; border-left: 4px solid #60a5fa; }
    
    .role-switcher { padding: 20px; background-color: #0f172a; border-top: 1px solid #334155; }
    .role-switcher select { width: 100%; padding: 8px; background: #334155; color: white; border: none; border-radius: 4px; }

    .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .header { background-color: white; padding: 20px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; }
    .content { padding: 20px; overflow-y: auto; flex: 1; }
    
    /* UI Elements */
    .card { background: white; border-radius: 8px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px;}
    
    .btn { padding: 8px 16px; background-color: #2563eb; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; }
    .btn:hover { background-color: #1d4ed8; }
    .btn-outline { background-color: transparent; border: 1px solid #d1d5db; color: #374151; }
    .btn-outline:hover { background-color: #f3f4f6; }
    .btn-danger { background-color: #ef4444; }
    .btn-success { background-color: #10b981; }

    table { width: 100%; border-collapse: collapse; text-align: left; font-size: 0.95rem; }
    th, td { padding: 12px; border-bottom: 1px solid #e5e7eb; }
    th { background-color: #f9fafb; font-weight: 600; color: #4b5563; }
    tr:hover { background-color: #f9fafb; }
    
    .badge { padding: 4px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: bold; }
    .badge-green { background-color: #dcfce3; color: #166534; }
    .badge-yellow { background-color: #fef08a; color: #854d0e; }
    .badge-red { background-color: #fee2e2; color: #991b1b; }
    .badge-gray { background-color: #f3f4f6; color: #374151; }

    .action-link { color: #2563eb; cursor: pointer; text-decoration: none; margin-right: 8px; }
    .action-link:hover { text-decoration: underline; }
    .text-danger { color: #dc2626; }

    .filters { display: flex; gap: 10px; margin-bottom: 15px; }
    .filters select, .filters input { padding: 8px; border: 1px solid #d1d5db; border-radius: 4px; }
    
  </style>
</head>
<body>

  <div class="sidebar">
    <div class="sidebar-header">EduCenter ERP</div>
    <ul class="sidebar-menu" id="menuList"></ul>
    <div class="role-switcher">
      <label style="font-size: 0.8rem; color: #94a3b8; display: block; margin-bottom: 5px;">ƒê·ªïi quy·ªÅn (Demo):</label>
      <select id="roleSelect">
        <option value="ADMIN">Admin / Gi√°o v·ª•</option>
        <option value="ACCOUNTANT">K·∫ø to√°n</option>
        <option value="TEACHER">Gi·∫£ng vi√™n</option>
      </select>
    </div>
  </div>

  <div class="main">
    <div class="header">
      <h1 id="pageTitle" style="font-size: 1.2rem; color: #1f2937;">Dashboard</h1>
      <div id="userInfo"><strong>Vai tr√≤:</strong> ADMIN</div>
    </div>
    <div class="content" id="appContent"></div>
  </div>

  <script>
    // --- 1. STATE & C·∫§U H√åNH MENU ---
    let currentRole = 'ADMIN';
    let currentTab = 'TEACHERS';
    const mockStudents = [
      { id: 'HV01', name: 'Nguy·ªÖn VƒÉn A', status: 'ƒêang h·ªçc', attendance: '95%' },
      { id: 'HV02', name: 'Tr·∫ßn Th·ªã B', status: 'B·∫£o l∆∞u', attendance: '50%' },
    ];

    const menus = {
      ADMIN: [
        { id: 'STUDENTS', label: '1.4 Qu·∫£n l√Ω H·ªçc vi√™n' },
        { id: 'TEACHERS', label: '1.5 Qu·∫£n l√Ω Gi·∫£ng vi√™n' },
        { id: 'STAFF', label: '1.6 Qu·∫£n l√Ω Nh√¢n vi√™n' },
      ],
      ACCOUNTANT: [
        { id: 'ACC_DASHBOARD', label: '3.1 Dashboard K·∫ø to√°n' },
        { id: 'RECEIPTS', label: '3.2 Phi·∫øu thu / H·ªçc ph√≠' },
        { id: 'DEBTS', label: '3.3 C√¥ng n·ª£' },
        { id: 'EXPENSES', label: '3.4 Thu chi n·ªôi b·ªô' },
        { id: 'FINANCE_REPORTS', label: '3.5 B√°o c√°o t√†i ch√≠nh' },
      ],
      TEACHER: [
        { id: 'T_DASHBOARD', label: '4.1 Dashboard Gi·∫£ng vi√™n' },
        { id: 'MY_CLASSES', label: 'L·ªõp & Nh·∫≠p ƒëi·ªÉm (4.2 - 4.5)' },
      ]
    };

    // --- 2. H·ªÜ TH·ªêNG GIAO DI·ªÜN (VIEWS) ---
    const views = {
      // ================= A) QU·∫¢N L√ù H·ªåC VI√äN =================
      STUDENTS: () => `
        <div class="card">
          <div class="card-header">
            <h2>Danh s√°ch H·ªçc vi√™n</h2>
            <button class="btn" onclick="addStudent()">+ Th√™m h·ªçc vi√™n</button>
          </div>
          <table>
            <thead>
              <tr><th>M√£ HV</th><th>H·ªç t√™n</th><th>Tr·∫°ng th√°i</th><th>Chuy√™n c·∫ßn</th><th>Thao t√°c</th></tr>
            </thead>
            <tbody>
              ${mockStudents.map(s => `
                <tr>
                  <td>${s.id}</td>
                  <td>${s.name}</td>
                  <td><span class="badge ${s.status === 'ƒêang h·ªçc' ? 'badge-green' : 'badge-yellow'}">${s.status}</span></td>
                  <td>${s.attendance}</td>
                  <td>
                    <a class="action-link" onclick="editStudent('${s.id}')">S·ª≠a</a> |
                    <a class="action-link text-danger" onclick="deleteStudent('${s.id}')">X√≥a</a>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `,

      // ================= B) ADMIN: GI·∫¢NG VI√äN & NH√ÇN VI√äN =================
      TEACHERS: () => `
        <div class="card">
          <div class="card-header">
            <h2>Qu·∫£n l√Ω Gi·∫£ng vi√™n</h2>
            <button class="btn" onclick="alert('M·ªü form th√™m Gi·∫£ng vi√™n')">+ Th√™m Gi·∫£ng vi√™n</button>
          </div>
          <table>
            <thead>
              <tr><th>M√£ GV</th><th>H·ªç t√™n</th><th>M√¥n d·∫°y</th><th>Tr·∫°ng th√°i</th><th>Thao t√°c</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>GV001</td><td>L√™ VƒÉn ƒê·∫°t</td><td>IELTS, TOEIC</td>
                <td><span class="badge badge-green">ƒêang d·∫°y</span></td>
                <td>
                  <a class="action-link" onclick="alert('Chi ti·∫øt GV: L√™ VƒÉn ƒê·∫°t\nM√¥n: IELTS, TOEIC\nSƒêT: 0901234567')">Chi ti·∫øt</a> |
                  <a class="action-link" onclick="alert('L·ªãch d·∫°y c·ªßa GV L√™ VƒÉn ƒê·∫°t:\n- IELTS Intensive 01: 2-4-6 (18h-20h)\n- TOEIC 05: 3-5-7 (8h-10h)')">L·ªãch d·∫°y</a> |
                  <a class="action-link" onclick="alert('M·ªü b·∫£ng c·∫•u h√¨nh l∆∞∆°ng cho GV: L√™ VƒÉn ƒê·∫°t\nH·ªá s·ªë l∆∞∆°ng: 1.5 | L∆∞∆°ng/bu·ªïi: 350,000 ƒë')">C·∫•u h√¨nh l∆∞∆°ng</a>
                </td>
              </tr>
              <tr>
                <td>GV002</td><td>Ph·∫°m Th·ªã Mai</td><td>Giao ti·∫øp</td>
                <td><span class="badge badge-gray">T·∫°m ngh·ªâ</span></td>
                <td>
                  <a class="action-link" onclick="alert('Chi ti·∫øt GV: Ph·∫°m Th·ªã Mai\nM√¥n: Giao ti·∫øp\nSƒêT: 0912345678')">Chi ti·∫øt</a> |
                  <a class="action-link" onclick="alert('GV Ph·∫°m Th·ªã Mai hi·ªán ƒëang t·∫°m ngh·ªâ, ch∆∞a c√≥ l·ªãch d·∫°y.')">L·ªãch d·∫°y</a> |
                  <a class="action-link" onclick="alert('M·ªü b·∫£ng c·∫•u h√¨nh l∆∞∆°ng cho GV: Ph·∫°m Th·ªã Mai\nH·ªá s·ªë l∆∞∆°ng: 1.2 | L∆∞∆°ng/bu·ªïi: 280,000 ƒë')">C·∫•u h√¨nh l∆∞∆°ng</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `,

      STAFF: () => `
        <div class="card">
          <div class="card-header">
            <h2>Qu·∫£n l√Ω Nh√¢n vi√™n</h2>
            <button class="btn" onclick="alert('M·ªü form th√™m Nh√¢n vi√™n m·ªõi')">+ Th√™m Nh√¢n vi√™n</button>
          </div>
          <table>
            <thead>
              <tr><th>M√£ NV</th><th>H·ªç t√™n</th><th>Vai tr√≤ (Role)</th><th>Tr·∫°ng th√°i</th><th>T√†i kho·∫£n</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>NV001</td><td>Tr·∫ßn H·ªØu Nam</td><td><span class="badge badge-yellow">Gi√°o v·ª•</span></td>
                <td><span class="badge badge-green">Active</span></td>
                <td>
                  <a class="action-link" onclick="if(confirm('X√°c nh·∫≠n Reset m·∫≠t kh·∫©u cho NV001 - Tr·∫ßn H·ªØu Nam?')) alert('M·∫≠t kh·∫©u m·ªõi ƒë√£ ƒë∆∞·ª£c g·ª≠i v·ªÅ email c·ªßa Tr·∫ßn H·ªØu Nam!')">Reset Pass</a> |
                  <a class="action-link text-danger" onclick="if(confirm('B·∫°n c√≥ ch·∫Øc mu·ªën kh√≥a t√†i kho·∫£n NV001 - Tr·∫ßn H·ªØu Nam?')) alert('T√†i kho·∫£n NV001 ƒë√£ b·ªã kh√≥a!')">Kh√≥a t√†i kho·∫£n</a>
                </td>
              </tr>
              <tr>
                <td>NV002</td><td>Nguy·ªÖn K·∫ø To√°n</td><td><span class="badge badge-gray">K·∫ø to√°n</span></td>
                <td><span class="badge badge-red">Locked</span></td>
                <td>
                  <a class="action-link" onclick="if(confirm('X√°c nh·∫≠n m·ªü kh√≥a t√†i kho·∫£n NV002 - Nguy·ªÖn K·∫ø To√°n?')) alert('T√†i kho·∫£n NV002 ƒë√£ ƒë∆∞·ª£c m·ªü kh√≥a!')">M·ªü kh√≥a</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `,

      // ================= D) K·∫æ TO√ÅN =================
      ACC_DASHBOARD: () => `
        <div class="grid-3">
          <div class="card" style="border-top: 4px solid #10b981;">
            <p style="color: #6b7280; font-size: 0.9rem;">T·ªïng thu h√¥m nay</p>
            <h3 style="font-size: 1.8rem; margin-top: 10px;">12,500,000 ƒë</h3>
          </div>
          <div class="card" style="border-top: 4px solid #ef4444;">
            <p style="color: #6b7280; font-size: 0.9rem;">Danh s√°ch n·ª£ (Th√°ng n√†y)</p>
            <h3 style="font-size: 1.8rem; margin-top: 10px;">35,000,000 ƒë</h3>
          </div>
          <div class="card" style="border-top: 4px solid #f59e0b;">
            <p style="color: #6b7280; font-size: 0.9rem;">Phi·∫øu ch·ªù x√°c nh·∫≠n</p>
            <h3 style="font-size: 1.8rem; margin-top: 10px;">3 Phi·∫øu</h3>
          </div>
        </div>
        <div class="card">
          <h3>Th·ªëng k√™ doanh thu theo l·ªõp (Top 3)</h3>
          <table style="margin-top: 15px;">
            <tr><th>T√™n l·ªõp</th><th>Sƒ© s·ªë</th><th>ƒê√£ thu</th><th>C√≤n n·ª£</th></tr>
            <tr><td>IELTS 01</td><td>20</td><td>40,000,000 ƒë</td><td>5,000,000 ƒë</td></tr>
            <tr><td>TOEIC 05</td><td>25</td><td>35,000,000 ƒë</td><td>0 ƒë</td></tr>
          </table>
        </div>
      `,

      RECEIPTS: () => `
        <div class="card">
          <div class="card-header">
            <h2>Phi·∫øu thu / H·ªçc ph√≠</h2>
            <button class="btn btn-success" onclick="alert('M·ªü form t·∫°o Phi·∫øu thu m·ªõi')">+ T·∫°o phi·∫øu thu</button>
          </div>
          <div class="filters">
            <input type="text" placeholder="T√¨m t√™n HV, M√£ phi·∫øu...">
            <select><option>T·∫•t c·∫£ tr·∫°ng th√°i</option><option>ƒê√£ thanh to√°n</option><option>Ch·ªù x√°c nh·∫≠n</option></select>
          </div>
          <table>
            <thead>
              <tr><th>M√£ PT</th><th>H·ªçc vi√™n</th><th>L·ªõp</th><th>S·ªë ti·ªÅn</th><th>Tr·∫°ng th√°i</th><th>Thao t√°c</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>PT102</td><td>Nguy·ªÖn VƒÉn A</td><td>IELTS 01</td><td>2,000,000 ƒë</td>
                <td><span class="badge badge-yellow">Ch·ªù x√°c nh·∫≠n</span></td>
                <td>
                  <a class="action-link" onclick="if(confirm('X√°c nh·∫≠n thanh to√°n Phi·∫øu PT102 - Nguy·ªÖn VƒÉn A?')) alert('Phi·∫øu thu PT102 ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n th√†nh c√¥ng!')">X√°c nh·∫≠n</a> |
                  <a class="action-link" onclick="alert('ƒêang m·ªü giao di·ªán in Phi·∫øu thu PT102...\nM√£: PT102 | HV: Nguy·ªÖn VƒÉn A | S·ªë ti·ªÅn: 2,000,000 ƒë')">In phi·∫øu (UI)</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      `,

      DEBTS: () => `
        <div class="card">
          <h2>Qu·∫£n l√Ω C√¥ng n·ª£</h2>
          <div class="filters" style="margin-top: 15px;">
            <select><option>L·ªçc theo L·ªõp</option><option>IELTS 01</option></select>
            <select><option>L·ªçc theo H·∫°n</option><option>Qu√° h·∫°n</option><option>S·∫Øp ƒë·∫øn h·∫°n</option></select>
          </div>
          <table>
            <thead>
              <tr><th>H·ªçc vi√™n</th><th>L·ªõp</th><th>S·ªë ti·ªÅn n·ª£</th><th>H·∫°n ƒë√≥ng</th><th>Thao t√°c</th></tr>
            </thead>
            <tbody>
              <tr>
                <td>L√™ B√¨nh</td><td>IELTS 01</td><td style="color: #ef4444; font-weight: bold;">1,500,000 ƒë</td><td>15/10/2025</td>
                <td><button class="btn btn-outline" style="padding: 4px 8px; font-size: 0.8rem;" onclick="alert('ƒê√£ t·∫°o Record th√¥ng b√°o nh·∫Øc n·ª£ UI cho H·ªçc vi√™n!')">üîî Nh·∫Øc n·ª£</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      `,

      EXPENSES: () => `
        <div class="card">
          <div class="card-header">
            <h2>Thu chi n·ªôi b·ªô</h2>
            <button class="btn" onclick="alert('M·ªü form t·∫°o kho·∫£n Thu chi n·ªôi b·ªô m·ªõi')">+ T·∫°o kho·∫£n chi</button>
          </div>
          <table>
            <tr><th>Ng√†y</th><th>H·∫°ng m·ª•c</th><th>S·ªë ti·ªÅn</th><th>Ng∆∞·ªùi t·∫°o</th><th>Thao t√°c</th></tr>
            <tr><td>20/10/2025</td><td>Ti·ªÅn ƒëi·ªán n∆∞·ªõc th√°ng 10</td><td>2,500,000 ƒë</td><td>NV K·∫ø to√°n</td><td><a class="action-link" onclick="alert('M·ªü form s·ª≠a kho·∫£n: Ti·ªÅn ƒëi·ªán n∆∞·ªõc th√°ng 10')">S·ª≠a</a></td></tr>
            <tr><td>18/10/2025</td><td>Mua vƒÉn ph√≤ng ph·∫©m</td><td>500,000 ƒë</td><td>NV K·∫ø to√°n</td><td><a class="action-link" onclick="alert('M·ªü form s·ª≠a kho·∫£n: Mua vƒÉn ph√≤ng ph·∫©m')">S·ª≠a</a></td></tr>
          </table>
        </div>
      `,

      FINANCE_REPORTS: () => `
        <div class="card">
          <div class="card-header">
            <h2>B√°o c√°o t√†i ch√≠nh</h2>
            <button class="btn btn-outline" onclick="alert('ƒêang xu·∫•t file Excel b√°o c√°o t√†i ch√≠nh...\nFile s·∫Ω ƒë∆∞·ª£c t·∫£i v·ªÅ m√°y sau √≠t gi√¢y!')">‚¨á Export Excel</button>
          </div>
          <div class="filters">
            <input type="date"> <span>ƒë·∫øn</span> <input type="date">
            <select><option>Doanh thu t·ªïng</option><option>Theo L·ªõp/Kh√≥a</option><option>C√¥ng n·ª£ qu√° h·∫°n</option></select>
            <button class="btn" onclick="showFinanceReport()">Xem b√°o c√°o</button>
          </div>
          <div style="height: 200px; background: #f9fafb; display:flex; align-items:center; justify-content:center; border: 1px dashed #d1d5db; margin-top: 20px;">
            <p style="color: #6b7280;">B·∫£ng d·ªØ li·ªáu b√°o c√°o s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y d·ª±a theo Filter...</p>
          </div>
        </div>
      `,

      // ================= E) GI·∫¢NG VI√äN =================
      T_DASHBOARD: () => `
        <div class="grid-3">
          <div class="card">
            <h3>L·ªãch d·∫°y h√¥m nay</h3>
            <p style="font-size: 1.5rem; color: #2563eb; margin-top: 10px; font-weight: bold;">2 Ca</p>
          </div>
          <div class="card">
            <h3>T·ªïng s·ªë l·ªõp</h3>
            <p style="font-size: 1.5rem; margin-top: 10px; font-weight: bold;">4 L·ªõp</p>
          </div>
          <div class="card" style="border-top: 4px solid #f59e0b;">
            <h3>S·ªï ƒë·∫ßu b√†i ch·ªù nh·∫≠p</h3>
            <p style="font-size: 1.5rem; margin-top: 10px; font-weight: bold;">1 L·ªõp</p>
          </div>
        </div>
      `,

      MY_CLASSES: () => `
        <div class="card">
          <h2>L·ªõp ƒëang gi·∫£ng d·∫°y</h2>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 15px;">
              <h3 style="color: #1e40af;">IELTS Intensive 01</h3>
              <p style="color: #4b5563; font-size: 0.9rem; margin: 8px 0;">üïí L·ªãch: 2-4-6 (18h-20h)</p>
              <p style="color: #4b5563; font-size: 0.9rem; margin-bottom: 15px;">üë• Sƒ© s·ªë: 15 h·ªçc vi√™n</p>
              <div style="display: flex; gap: 10px;">
                <button class="btn btn-outline" style="flex: 1;" onclick="alert('ƒêang m·ªü chi ti·∫øt L·ªõp h·ªçc...')">Chi ti·∫øt l·ªõp</button>
                <button class="btn" style="flex: 1;" onclick="alert('M·ªü form Nh·∫≠p ƒëi·ªÉm & Nh·∫≠n x√©t cho bu·ªïi h·ªçc!')">Nh·∫≠p ƒëi·ªÉm</button>
              </div>
            </div>
            
             <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 15px;">
              <h3 style="color: #1e40af;">Giao ti·∫øp C∆° b·∫£n 03</h3>
              <p style="color: #4b5563; font-size: 0.9rem; margin: 8px 0;">üïí L·ªãch: 3-5-7 (19h-21h)</p>
              <p style="color: #4b5563; font-size: 0.9rem; margin-bottom: 15px;">üë• Sƒ© s·ªë: 20 h·ªçc vi√™n</p>
              <div style="display: flex; gap: 10px;">
                <button class="btn btn-outline" style="flex: 1;" onclick="alert('ƒêang m·ªü chi ti·∫øt L·ªõp h·ªçc...')">Chi ti·∫øt l·ªõp</button>
                <button class="btn" style="flex: 1;" onclick="alert('M·ªü form Nh·∫≠p ƒëi·ªÉm & Nh·∫≠n x√©t cho bu·ªïi h·ªçc!')">Nh·∫≠p ƒëi·ªÉm</button>
              </div>
            </div>
          </div>
        </div>
      `
    };

    // --- 3. ƒêI·ªÄU KHI·ªÇN DOM & LOGIC ---
    const menuList = document.getElementById('menuList');
    const appContent = document.getElementById('appContent');
    const roleSelect = document.getElementById('roleSelect');
    const pageTitle = document.getElementById('pageTitle');
    const userInfo = document.getElementById('userInfo');

    function renderMenu() {
      menuList.innerHTML = '';
      menus[currentRole].forEach(item => {
        const li = document.createElement('li');
        li.className = `menu-item ${currentTab === item.id ? 'active' : ''}`;
        li.textContent = item.label;
        li.onclick = () => { currentTab = item.id; updateApp(); };
        menuList.appendChild(li);
      });
    }

    function renderContent() {
      if (views[currentTab]) {
        appContent.innerHTML = views[currentTab]();
      } else {
        appContent.innerHTML = `<div class="card"><p>Giao di·ªán ƒëang ƒë∆∞·ª£c x√¢y d·ª±ng...</p></div>`;
      }
    }

    function updateApp() {
      renderMenu();
      renderContent();
      
      const roleNames = { 'ADMIN': 'Ban Qu·∫£n tr·ªã', 'ACCOUNTANT': 'Ph√≤ng K·∫ø to√°n', 'TEACHER': 'Portal Gi·∫£ng vi√™n' };
      pageTitle.textContent = menus[currentRole].find(m => m.id === currentTab)?.label || 'Dashboard';
      userInfo.innerHTML = `<strong>Ph√¢n h·ªá:</strong> ${roleNames[currentRole]}`;
    }

    roleSelect.addEventListener('change', (e) => {
      currentRole = e.target.value;
      currentTab = menus[currentRole][0].id; // T·ª± ƒë·ªông ch·ªçn tab ƒë·∫ßu ti√™n c·ªßa Role
      updateApp();
    });

    // --- 4. C√ÅC H√ÄM X·ª¨ L√ù ACTIONS ---

    // H·ªçc vi√™n
    function addStudent() {
      const name = prompt('Nh·∫≠p h·ªç t√™n h·ªçc vi√™n m·ªõi:');
      if (!name || !name.trim()) return;
      const attendance = prompt('Chuy√™n c·∫ßn (vd: 100%):') || '100%';
      const id = 'HV0' + (mockStudents.length < 9 ? '0' : '') + (mockStudents.length + 1);
      mockStudents.push({ id, name: name.trim(), status: 'ƒêang h·ªçc', attendance });
      alert(`ƒê√£ th√™m h·ªçc vi√™n "${name.trim()}" (${id}) th√†nh c√¥ng!`);
      renderContent();
    }

    function editStudent(id) {
      const s = mockStudents.find(x => x.id === id);
      if (!s) return;
      const newName = prompt(`S·ª≠a h·ªç t√™n cho ${s.id}:`, s.name);
      if (!newName || !newName.trim()) return;
      const newStatus = prompt(`Tr·∫°ng th√°i (ƒêang h·ªçc / B·∫£o l∆∞u / Ngh·ªâ h·ªçc):`, s.status);
      s.name = newName.trim();
      if (newStatus) s.status = newStatus.trim();
      alert(`ƒê√£ c·∫≠p nh·∫≠t th√¥ng tin h·ªçc vi√™n ${id}!`);
      renderContent();
    }

    function deleteStudent(id) {
      const s = mockStudents.find(x => x.id === id);
      if (!s) return;
      if (!confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a h·ªçc vi√™n "${s.name}" (${id})? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!`)) return;
      const idx = mockStudents.indexOf(s);
      mockStudents.splice(idx, 1);
      alert(`ƒê√£ x√≥a h·ªçc vi√™n "${s.name}" th√†nh c√¥ng!`);
      renderContent();
    }

    // B√°o c√°o t√†i ch√≠nh
    function showFinanceReport() {
      const fromDate = document.querySelector('.filters input[type="date"]:first-of-type')?.value;
      const toDate   = document.querySelector('.filters input[type="date"]:last-of-type')?.value;
      const type     = document.querySelector('.filters select')?.value || 'Doanh thu t·ªïng';
      const from = fromDate || '01/01/2025';
      const to   = toDate   || '31/12/2025';
      const reportBox = document.querySelector('#appContent .card div[style*="200px"]');
      if (reportBox) {
        reportBox.innerHTML = `
          <table style="width:100%; border-collapse:collapse; font-size:0.9rem;">
            <thead>
              <tr style="background:#f9fafb;">
                <th style="padding:10px; border-bottom:1px solid #e5e7eb; text-align:left;">L·ªõp / Kho·∫£n m·ª•c</th>
                <th style="padding:10px; border-bottom:1px solid #e5e7eb; text-align:right;">Doanh thu</th>
                <th style="padding:10px; border-bottom:1px solid #e5e7eb; text-align:right;">Chi ph√≠</th>
                <th style="padding:10px; border-bottom:1px solid #e5e7eb; text-align:right;">L·ª£i nhu·∫≠n</th>
              </tr>
            </thead>
            <tbody>
              <tr><td style="padding:10px;">IELTS 01</td><td style="padding:10px; text-align:right;">40,000,000 ƒë</td><td style="padding:10px; text-align:right;">12,000,000 ƒë</td><td style="padding:10px; text-align:right; color:#166534; font-weight:bold;">28,000,000 ƒë</td></tr>
              <tr><td style="padding:10px;">TOEIC 05</td><td style="padding:10px; text-align:right;">35,000,000 ƒë</td><td style="padding:10px; text-align:right;">10,000,000 ƒë</td><td style="padding:10px; text-align:right; color:#166534; font-weight:bold;">25,000,000 ƒë</td></tr>
              <tr style="background:#f9fafb; font-weight:bold;"><td style="padding:10px;">T·ªïng c·ªông</td><td style="padding:10px; text-align:right;">75,000,000 ƒë</td><td style="padding:10px; text-align:right;">22,000,000 ƒë</td><td style="padding:10px; text-align:right; color:#166534;">53,000,000 ƒë</td></tr>
            </tbody>
          </table>
          <p style="margin-top:8px; font-size:0.8rem; color:#6b7280;">B√°o c√°o: ${type} | T·ª´ ${from} ‚Üí ƒë·∫øn ${to}</p>
        `;
      }
    }

    // Kh·ªüi ch·∫°y
    updateApp();
  </script>
</body>
</html>