<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Dashboard H·ªçc vi√™n</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="student.css">
</head>
<body>

<div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <h2 class="logo">Anh Ng·ªØ ABC</h2>
        <nav>
            <a href="dashboard.html" class="active">Dashboard</a>
            <a href="Schedule.html">L·ªãch h·ªçc</a>
            <a href="Results.html">K·∫øt qu·∫£</a>
            <a href="tuition.html">H·ªçc ph√≠</a>
            <a href="profile.html">H·ªì s∆° c√° nh√¢n</a>
        </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">

        <h1 id="studentName"></h1>

        <!-- ===== QUICK STATS ===== -->
        <div class="stats-grid">

            <div class="stat-card blue">
                <div class="stat-number" id="totalClasses"></div>
                <div class="stat-label">L·ªõp ƒëang h·ªçc</div>
            </div>

            <div class="stat-card purple">
                <div class="stat-number" id="totalProgress"></div>
                <div class="stat-label">T·ªïng bu·ªïi ƒë√£ h·ªçc</div>
            </div>

            <div class="stat-card green">
                <div class="stat-number" id="tuitionPaid"></div>
                <div class="stat-label">ƒê√£ ƒë√≥ng</div>
                <div class="tuition-sub" id="tuitionDebt"></div>
                <div class="progress-bar">
                    <div id="tuitionBar" class="progress"></div>
                </div>
            </div>

        </div>

        <!-- ===== CLASS LIST ===== -->
        <h2 style="margin-top:40px;">C√°c l·ªõp ƒëang h·ªçc</h2>
        <div id="classGrid" class="class-grid"></div>

    </main>


</div>


<script src="../FakeData/student-data.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {

        // Xin ch√†o
        document.getElementById("studentName").innerText =
            `Xin ch√†o, ${student.name} üëã`;

        // ===== STATS =====

        // T·ªïng l·ªõp
        document.getElementById("totalClasses").innerText =
            student.classes.length;

        // T·ªïng bu·ªïi ƒë√£ h·ªçc
        let totalCompleted = 0;
        student.classes.forEach(cls => {
            totalCompleted += cls.completedLessons;
        });

        document.getElementById("totalProgress").innerText =
            totalCompleted;

        // ===== Tuition =====

        const total = student.tuition.total;
        const paid = student.tuition.paid;
        const debt = total - paid;

        document.getElementById("tuitionPaid").innerText =
            paid.toLocaleString("vi-VN") + " ƒë";

        document.getElementById("tuitionDebt").innerText =
            "C√≤n n·ª£: " + debt.toLocaleString("vi-VN") + " ƒë";

        const percent = (paid / total) * 100;

        document.getElementById("tuitionBar").style.width =
            percent + "%";

        // ===== CLASS CARDS =====

        const grid = document.getElementById("classGrid");

        student.classes.forEach(cls => {

            const percent =
                (cls.completedLessons / cls.totalLessons) * 100;

            const card = document.createElement("div");
            card.classList.add("class-card");

            card.style.cursor = "pointer";
            card.addEventListener("click", function () {
                window.location.href =
                    `Class_Detail.html?id=${cls.code}`;
            });

            card.innerHTML = `
            <div class="class-header">
                <span class="class-code">${cls.code}</span>
                <span class="next-session">
                    S·∫Øp t·ªõi: ${cls.nextSession}
                </span>
            </div>

            <h3>${cls.name}</h3>
            <p>Gi·∫£ng vi√™n: ${cls.teacher}</p>

            <p>Ti·∫øn tr√¨nh:
               ${cls.completedLessons}/${cls.totalLessons}
            </p>

            <div class="progress-bar">
                <div class="progress"
                     style="width:${percent}%"></div>
            </div>
        `;

            grid.appendChild(card);
        });

    });

</script>

</body>
</html>
